#!/usr/bin/env bash

projectName=$1
dependencies=$2
command=${@:3}

branch=`git rev-parse --abbrev-ref HEAD`

if [ "$branch" = "master" ]; then
  echo "executing command because this is the master branch"
  eval $command
elif git diff --name-only origin/master...$branch | grep "^($projectName|$dependencies)/" ; then
  echo "executing command because there is a diff in $projectName"
  eval $command
else
  echo "skipping command because there is no diff"
fi